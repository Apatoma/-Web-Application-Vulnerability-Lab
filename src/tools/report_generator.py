import os
from datetime import datetime

def generate_report(vulnerabilities):
    report_name = f"security_report_{datetime.now().strftime('%Y%m%d%H%M%S')}.txt"
    with open(report_name, 'w') as f:
        f.write("Security Report\n")
        f.write(f"Generated on: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
        if vulnerabilities:
            f.write("Vulnerabilities Found:\n")
            for v in vulnerabilities:
                f.write(f"- {v}\n")
        else:
            f.write("No vulnerabilities found.\n")
    print(f"Report generated: {report_name}")

if __name__ == "__main__":
    from code_analyzer import analyze_code
    vulnerabilities = analyze_code('../challenges/')
    generate_report(vulnerabilities)
